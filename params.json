{"name":"Scratchpad","tagline":"sqltools","body":"SELECT count(1)/128 AS cached_MB \r\n    , name \r\n    , index_id \r\nFROM sys.dm_os_buffer_descriptors AS bd with (NOLOCK) \r\n    INNER JOIN \r\n    (\r\n        SELECT name = OBJECT_SCHEMA_NAME(object_id) + '.' + object_name(object_id)\r\n            --name = 'dbo.' + cast(object_id as varchar(100))\r\n            , index_id \r\n            , allocation_unit_id\r\n        FROM sys.allocation_units AS au with (NOLOCK)\r\n            INNER JOIN sys.partitions AS p with (NOLOCK) \r\n                ON au.container_id = p.hobt_id \r\n                    AND (au.type = 1 OR au.type = 3)\r\n        UNION ALL\r\n        SELECT name = OBJECT_SCHEMA_NAME(object_id) + '.' + object_name(object_id) \r\n            --name = 'dbo.' + cast(object_id as varchar(100))   \r\n            , index_id\r\n            , allocation_unit_id\r\n        FROM sys.allocation_units AS au with (NOLOCK)\r\n            INNER JOIN sys.partitions AS p with (NOLOCK)\r\n                ON au.container_id = p.partition_id \r\n                    AND au.type = 2\r\n    ) AS obj \r\n        ON bd.allocation_unit_id = obj.allocation_unit_id\r\nWHERE database_id = db_id()\r\nGROUP BY name, index_id \r\nHAVING Count(*) > 128\r\nORDER BY 1 DESC;","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}